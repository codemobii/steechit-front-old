_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[38],{Jh6j:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("o0o1"),r=a.n(n),o=a("HaE+"),i=a("vDqi"),c=a.n(i),s=a("LvDl"),l=a("yuru"),u=function(e,t){return function(){var a=Object(o.a)(r.a.mark((function a(n){var o,i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c()({headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(e)},proxy:{host:"104.236.174.88",port:3128},method:"GET",url:"".concat("https://api.steechit.com/","users/").concat(t)});case 3:o=a.sent,n({type:l.b,payload:{success:!0,message:"User data selected",email:o.data.email,phone:o.data.phone,role:o.data.role,verified:o.data.verified,firstName:o.data.firstName,lastName:o.data.lastName,country:o.data.country,state:o.data.state,dateOfBirth:o.data.dateOfBirth,gender:o.data.gender,address:o.data.contact.address,zipCode:o.data.contact.zipCode,imageUrl:o.data.avatar.url}}),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),i=Object(s.get)(a.t0,"response.data.message")||a.t0.message,n({type:l.b,payload:{success:!1,message:i}});case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}},RBGv:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return w}));var n=a("o0o1"),r=a.n(n),o=a("HaE+"),i=a("x242"),c=a("q1tI"),s=a.n(c),l=a("/MKj"),u=a("vDqi"),p=a.n(u),d=a("BsLd"),f=a("2gv+"),g=a("nOHt"),h=a("Jh6j"),m=a("7HOD"),b=a("rePB"),v=a("LvDl"),y=s.a.createElement,x=a("sfw5");function O(e){var t,a=e.product,n=e.type,u=Object(l.c)((function(e){return e.auth})),d=Object(c.useState)(a.productName),f=d[0],h=d[1],m=Object(c.useState)(a.productDescription),x=m[0],O=m[1],j=Object(c.useState)(a.productCategory),w=j[0],C=j[1],A=Object(c.useState)([]),k=A[0],S=A[1],P=Object(c.useState)(""),E=(P[0],P[1],Object(c.useState)(a.price)),D=E[0],z=E[1],N=Object(c.useState)(a.percentageDiscount),_=N[0],I=N[1],L=Object(c.useState)(""),T=(L[0],L[1]),B=Object(c.useState)(""),F=B[0],R=B[1],G=Object(c.useState)(!1),M=G[0],J=G[1],Y=Object(c.useState)(!1),K=(Y[0],Y[1]),U=Object(c.useState)(!1),V=U[0],q=U[1],H=Object(c.useState)(!1),X=H[0],W=H[1],$=Object(c.useState)(""),Q=$[0],Z=$[1],ee=Object(c.useState)("fabric"===n?void 0!==a.fabric.materialPrice?a.fabric.materialPrice:"":void 0!==a.tailor.materialPrice?a.tailor.materialPrice:""),te=ee[0],ae=ee[1],ne=Object(c.useState)(a.tailor.sowingPrice),re=ne[0],oe=ne[1],ie=Object(c.useState)(a.productPictures),ce=ie[0],se=ie[1],le=u.token,ue=u._id,pe=Object(g.useRouter)();Object(c.useEffect)((function(){ge(),he()}),[]);var de=function(){var e=Object(o.a)(r.a.mark((function e(t){var o,i,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),J(!0),o={productName:f,productDescription:x,productCategory:w,store:F,type:n,imageCategory:"fabric"===n?"fabric":"design",user:ue,availableOptions:{measurement:null,price:D,percentageDiscount:_},productPictures:ce,feedback:{user:ue},tailor:{sowingPrice:parseFloat(re),materialPrice:"tailor"===n?parseFloat(te):""},fabric:{materialPrice:"fabric"===n?parseFloat(te):""},tag:[]},console.log(o),e.prev=4,e.next=7,p()({headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(le)},proxy:{host:"104.236.174.88",port:3128},method:"PUT",url:"".concat("https://api.steechit.com/","products/").concat(a._id),data:o});case 7:i=e.sent,J(!1),K(!0),Z("Product edited successfully"),W(!0),h(""),z(""),se([]),C(""),I(""),O(""),pe.push("/store/products"),console.log(i),e.next=28;break;case 22:e.prev=22,e.t0=e.catch(4),c=Object(v.get)(e.t0,"response.data.message")||e.t0.message,console.log(c),Z(c),W(!0);case 28:case"end":return e.stop()}}),e,null,[[4,22]])})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(o.a)(r.a.mark((function e(t){var a,n,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q(!0),4!==ce.length){e.next=7;break}Z("Your can only add four (4) images for product"),W(!0),q(!1),e.next=21;break;case 7:return a=t.target.files[0],(n=new FormData).append("image",a,a.name,a.size,a.type),e.next=12,p.a.post("https://steechit-image-manager.herokuapp.com/upload",n);case 12:o=e.sent,T(o.data.link),(i=ce).push({url:o.data.link}),se(i),console.log(ce),Z("Image uploaded successfully"),W(!0),q(!1);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(le)},proxy:{host:"104.236.174.88",port:3128},method:"GET",url:"".concat("https://api.steechit.com/","categories/")});case 2:t=e.sent,S(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(le)},proxy:{host:"104.236.174.88",port:3128},method:"GET",url:"".concat("https://api.steechit.com/","stores/"),params:{user:ue}});case 2:t=e.sent,console.log(t.data),R(t.data[0]._id);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return y(s.a.Fragment,null,y("form",{onSubmit:de},y(i.Row,null,y(i.Col,{size:"12"},y(i.Div,{d:"block",m:{b:"1rem"}},"Product Image(s)",y(i.Div,{d:"flex",style:{flexFlow:"wrap"},align:"center",m:{t:"0.5rem"},justify:"flex-start",pos:"relative"},ce.map((function(e){var t;return y(i.Div,(t={key:e,pos:"relative",w:"120px",h:"120px",border:"1px solid",borderColor:"gray300",rounded:"md",d:"flex",align:"center"},Object(b.a)(t,"pos","relative"),Object(b.a)(t,"overflow","hidden"),Object(b.a)(t,"justify","center"),Object(b.a)(t,"m",{r:"1rem",b:"1rem"}),t),y(i.Image,{pos:"absolute",top:"0",left:"0",w:"100%",h:"100%",src:e.url,style:{objectFit:"cover"}}),y(i.Icon,{zIndex:"10",name:"CloseSolid",size:"30px",color:"gray600",onClick:function(){var t=ce,a=t.indexOf(e,0),n=t.splice(0,a);se(n),console.log(n)}}))})),y(i.Div,(t={pos:"relative",w:"120px",h:"120px",border:"1px solid",borderColor:"gray300",rounded:"md",d:"flex",align:"center",justify:"center"},Object(b.a)(t,"pos","relative"),Object(b.a)(t,"overflow","hidden"),Object(b.a)(t,"m",{t:"-15px"}),t),y(i.Icon,{name:V?"Loading3":"Add",size:"50px",color:"gray600"}),y("input",{type:"file",style:{position:"absolute",top:0,left:0,height:"100%",cursor:"pointer",opacity:"0"},onChange:fe}))))),y(i.Col,{size:{xs:"12",sm:"12",md:"12",lg:"6",xl:"6"}},y(i.Label,{d:"block",m:{b:"1rem"}},"Product Name",y(i.Input,{placeholder:"Product Name",value:f,onChange:function(e){h(e.target.value)}}))),y(i.Col,{size:{xs:"12",sm:"12",md:"12",lg:"6",xl:"6"}},y(i.Label,{d:"block",m:{b:"1rem"}},"Product Category",y("select",{className:"select",onChange:function(e){C(e.target.value)},value:w},y("option",null,"Select state"),k.map((function(e){return y("option",{key:e,value:e._id},e.categoryName)}))))),"fabric"===n?y(i.Col,{size:{xs:"12",sm:"12",md:"12",lg:"6",xl:"6"}},y(i.Label,{d:"block",m:{b:"1rem"}},"Material Price (Per yard)",y(i.Input,{placeholder:"Price",value:te,onChange:function(e){return ae(e.target.value)}}))):y(s.a.Fragment,null,y(i.Col,{size:{xs:"12",sm:"12",md:"12",lg:"6",xl:"6"}},y(i.Label,{d:"block",m:{b:"1rem"}},"Material Price (Per yard)",y(i.Input,{placeholder:"Price",value:te,onChange:function(e){return ae(e.target.value)}}))),y(i.Col,{size:{xs:"12",sm:"12",md:"12",lg:"6",xl:"6"}},y(i.Label,{d:"block",m:{b:"1rem"}},"Sewing Price",y(i.Input,{placeholder:"Price",value:re,onChange:function(e){return oe(e.target.value)}})))),y(i.Col,{size:{xs:"12",sm:"12",md:"12",lg:"6",xl:"6"}},y(i.Label,{d:"block",m:{b:"1rem"}},"Discount for product in percent",y(i.Input,{placeholder:"Discount",value:_,onChange:function(e){I(e.target.value)}}))),y(i.Col,{size:"12"},y(i.Label,{d:"block",m:{b:"1rem"}},"Product Description",y(i.Textarea,{placeholder:"Product Description",value:x,onChange:function(e){O(e.target.value)},id:"edit"})))),y(i.Button,{fontFamily:"primary",bg:"warning700",justify:"center",m:{t:"1rem"},prefix:M?y(i.Icon,{name:"Loading3",size:"18px",color:"white",m:{r:"0.5rem"}}):null},M?"Uploading":"Add product")),y(i.Notification,{bg:"warning700",isOpen:X,onClose:function(){return W(!1)},prefix:y(i.Icon,{name:"CloseSolid",color:"white",size:"18px",m:{r:"0.5rem"}})},Q))}a("otY/"),new x("#edit");var j=s.a.createElement;function w(){var e=Object(l.c)((function(e){return e.auth})),t=Object(l.c)((function(e){return e.user})),a=Object(l.b)(),n=f.a.getState().auth.token,s=e._id,u=Object(g.useRouter)(),b=Object(c.useState)(!0),v=b[0],y=b[1],x=Object(c.useState)({}),w=x[0],C=x[1],A=Object(c.useState)(""),k=A[0],S=A[1],P=u.query.id;return Object(c.useEffect)((function(){var e=function(){var e=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(n)},proxy:{host:"104.236.174.88",port:3128},method:"GET",url:"".concat("https://api.steechit.com/","stores/"),params:{user:s}}).then(function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 0!==t.data.length?S(t.data[0].type):u.push("/profile/store/start"),e.next=3,p()({headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(n)},proxy:{host:"104.236.174.88",port:3128},method:"GET",url:"".concat("https://api.steechit.com/","products/").concat(P)}).then((function(e){console.log(e),C(e.data)})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)})).finally((function(){y(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a(Object(h.a)(n,s)),e()}),[s,n,a]),j(m.a,{title:"Edit product"},j(i.Div,{p:"20px",style:{borderBottom:"1px solid #ccc"},d:"flex",justify:"space-between",align:"center"},j(i.Text,{tag:"header",textSize:"title"},"Edit product")),v?j(d.a,null):j(i.Div,{p:"20px",pos:"relative"},j(O,{type:k,user:t,product:w})))}},goXs:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/store/products/[id]",function(){return a("RBGv")}])},"otY/":function(e,t,a){!function(e){"use strict";(e=e&&e.hasOwnProperty("default")?e.default:e).PLUGINS.align=function(e){var t=e.$;return{apply:function(a){var n=e.selection.element();if(t(n).parents(".fr-img-caption").length)t(n).css("text-align",a);else{e.selection.save(),e.html.wrap(!0,!0,!0,!0),e.selection.restore();for(var r=e.selection.blocks(),o=0;o<r.length;o++)t(r[o]).css("text-align",a).removeClass("fr-temp-div"),""===t(r[o]).attr("class")&&t(r[o]).removeAttr("class"),""===t(r[o]).attr("style")&&t(r[o]).removeAttr("style");e.selection.save(),e.html.unwrap(),e.selection.restore()}},refresh:function(a){var n=e.selection.blocks();if(n.length){var r=e.helpers.getAlignment(t(n[0]));a.find("> *").first().replaceWith(e.icon.create("align-".concat(r)))}},refreshOnShow:function(a,n){var r=e.selection.blocks();if(r.length){var o=e.helpers.getAlignment(t(r[0]));n.find('a.fr-command[data-param1="'.concat(o,'"]')).addClass("fr-active").attr("aria-selected",!0)}},refreshForToolbar:function(a){var n=e.selection.blocks();if(n.length){var r=e.helpers.getAlignment(t(n[0]));r=r.charAt(0).toUpperCase()+r.slice(1),"align".concat(r)===a.attr("data-cmd")&&a.addClass("fr-active")}}}},e.DefineIcon("align",{NAME:"align-left",SVG_KEY:"alignLeft"}),e.DefineIcon("align-left",{NAME:"align-left",SVG_KEY:"alignLeft"}),e.DefineIcon("align-right",{NAME:"align-right",SVG_KEY:"alignRight"}),e.DefineIcon("align-center",{NAME:"align-center",SVG_KEY:"alignCenter"}),e.DefineIcon("align-justify",{NAME:"align-justify",SVG_KEY:"alignJustify"}),e.RegisterCommand("align",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',a=e.COMMANDS.align.options;for(var n in a)a.hasOwnProperty(n)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="align"data-param1="\n        '.concat(n,'" title="').concat(this.language.translate(a[n]),'">').concat(this.icon.create("align-".concat(n)),'<span class="fr-sr-only">\n        ').concat(this.language.translate(a[n]),"</span></a></li>"));return t+"</ul>"},callback:function(e,t){this.align.apply(t)},refresh:function(e){this.align.refresh(e)},refreshOnShow:function(e,t){this.align.refreshOnShow(e,t)},plugin:"align"}),e.RegisterCommand("alignLeft",{type:"button",icon:"align-left",title:"Align Left",callback:function(){this.align.apply("left")},refresh:function(e){this.align.refreshForToolbar(e)},plugin:"align"}),e.RegisterCommand("alignRight",{type:"button",icon:"align-right",title:"Align Right",callback:function(){this.align.apply("right")},refresh:function(e){this.align.refreshForToolbar(e)},plugin:"align"}),e.RegisterCommand("alignCenter",{type:"button",icon:"align-center",title:"Align Center",callback:function(){this.align.apply("center")},refresh:function(e){this.align.refreshForToolbar(e)},plugin:"align"}),e.RegisterCommand("alignJustify",{type:"button",icon:"align-justify",title:"Align Justify",callback:function(){this.align.apply("justify")},refresh:function(e){this.align.refreshForToolbar(e)},plugin:"align"})}(a("sfw5"))}},[["goXs",0,1,4,13,2,3,5,6,7,9]]]);