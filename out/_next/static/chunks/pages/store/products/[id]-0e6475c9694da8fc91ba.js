_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[37],{Jh6j:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var a=r("o0o1"),o=r.n(a),n=r("HaE+"),c=r("vDqi"),s=r.n(c),i=r("LvDl"),u=r("yuru"),l=function(e,t){return function(){var r=Object(n.a)(o.a.mark((function r(a){var n,c;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,s()({headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(e)},proxy:{host:"104.236.174.88",port:3128},method:"GET",url:"".concat("https://api.steechit.com/","users/").concat(t)});case 3:n=r.sent,a({type:u.b,payload:{success:!0,message:"User data selected",email:n.data.email,phone:n.data.phone,role:n.data.role,verified:n.data.verified,firstName:n.data.firstName,lastName:n.data.lastName,country:n.data.country,state:n.data.state,dateOfBirth:n.data.dateOfBirth,gender:n.data.gender,address:n.data.contact.address,zipCode:n.data.contact.zipCode,imageUrl:n.data.avatar.url}}),r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),c=Object(i.get)(r.t0,"response.data.message")||r.t0.message,a({type:u.b,payload:{success:!1,message:c}});case 11:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e){return r.apply(this,arguments)}}()}},RBGv:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return j}));var a=r("o0o1"),o=r.n(a),n=r("HaE+"),c=r("x242"),s=r("q1tI"),i=r.n(s),u=r("/MKj"),l=r("vDqi"),p=r.n(l),d=r("BsLd"),f=r("2gv+"),m=r("nOHt"),b=r("Jh6j"),h=r("7HOD"),g=r("rePB"),v=r("LvDl"),x=i.a.createElement;function O(e){var t,r=e.product,a=e.type,l=Object(u.c)((function(e){return e.auth})),d=Object(s.useState)(r.productName),f=d[0],b=d[1],h=Object(s.useState)(r.productDescription),O=h[0],y=h[1],j=Object(s.useState)(r.productCategory),w=j[0],C=j[1],k=Object(s.useState)([]),P=k[0],S=k[1],z=Object(s.useState)(""),D=(z[0],z[1],Object(s.useState)(r.price)),A=D[0],E=D[1],_=Object(s.useState)(r.percentageDiscount),N=_[0],B=_[1],I=Object(s.useState)(""),L=(I[0],I[1]),T=Object(s.useState)(""),F=T[0],G=T[1],R=Object(s.useState)(!1),q=R[0],H=R[1],J=Object(s.useState)(!1),U=(J[0],J[1]),X=Object(s.useState)(!1),M=X[0],K=X[1],Y=Object(s.useState)(!1),Q=Y[0],V=Y[1],W=Object(s.useState)(""),Z=W[0],$=W[1],ee=Object(s.useState)("fabric"===a?void 0!==r.fabric.materialPrice?r.fabric.materialPrice:"":void 0!==r.tailor.materialPrice?r.tailor.materialPrice:""),te=ee[0],re=ee[1],ae=Object(s.useState)(r.tailor.sowingPrice),oe=ae[0],ne=ae[1],ce=Object(s.useState)(r.productPictures),se=ce[0],ie=ce[1],ue=l.token,le=l._id,pe=Object(m.useRouter)();Object(s.useEffect)((function(){me(),be()}),[]);var de=function(){var e=Object(n.a)(o.a.mark((function e(t){var n,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),H(!0),n={productName:f,productDescription:O,productCategory:w,store:F,type:a,imageCategory:"fabric"===a?"fabric":"design",user:le,availableOptions:{measurement:null,price:A,percentageDiscount:N},productPictures:se,feedback:{user:le},tailor:{sowingPrice:parseFloat(oe),materialPrice:"tailor"===a?parseFloat(te):""},fabric:{materialPrice:"fabric"===a?parseFloat(te):""},tag:[]},console.log(n),e.prev=4,e.next=7,p()({headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(ue)},proxy:{host:"104.236.174.88",port:3128},method:"PUT",url:"".concat("https://api.steechit.com/","products/").concat(r._id),data:n});case 7:c=e.sent,H(!1),U(!0),$("Product edited successfully"),V(!0),b(""),E(""),ie([]),C(""),B(""),y(""),pe.push("/store/products"),console.log(c),e.next=28;break;case 22:e.prev=22,e.t0=e.catch(4),s=Object(v.get)(e.t0,"response.data.message")||e.t0.message,console.log(s),$(s),V(!0);case 28:case"end":return e.stop()}}),e,null,[[4,22]])})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(n.a)(o.a.mark((function e(t){var r,a,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(K(!0),4!==se.length){e.next=7;break}$("Your can only add four (4) images for product"),V(!0),K(!1),e.next=21;break;case 7:return r=t.target.files[0],(a=new FormData).append("image",r,r.name,r.size,r.type),e.next=12,p.a.post("https://steechit-image-manager.herokuapp.com/upload",a);case 12:n=e.sent,L(n.data.link),(c=se).push({url:n.data.link}),ie(c),console.log(se),$("Image uploaded successfully"),V(!0),K(!1);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(n.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(ue)},proxy:{host:"104.236.174.88",port:3128},method:"GET",url:"".concat("https://api.steechit.com/","categories/")});case 2:t=e.sent,S(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(n.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(ue)},proxy:{host:"104.236.174.88",port:3128},method:"GET",url:"".concat("https://api.steechit.com/","stores/"),params:{user:le}});case 2:t=e.sent,console.log(t.data),G(t.data[0]._id);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return x(i.a.Fragment,null,x("form",{onSubmit:de},x(c.Row,null,x(c.Col,{size:"12"},x(c.Div,{d:"block",m:{b:"1rem"}},"Product Image(s)",x(c.Div,{d:"flex",style:{flexFlow:"wrap"},align:"center",m:{t:"0.5rem"},justify:"flex-start",pos:"relative"},se.map((function(e){var t;return x(c.Div,(t={key:e,pos:"relative",w:"120px",h:"120px",border:"1px solid",borderColor:"gray300",rounded:"md",d:"flex",align:"center"},Object(g.a)(t,"pos","relative"),Object(g.a)(t,"overflow","hidden"),Object(g.a)(t,"justify","center"),Object(g.a)(t,"m",{r:"1rem",b:"1rem"}),t),x(c.Image,{pos:"absolute",top:"0",left:"0",w:"100%",h:"100%",src:e.url,style:{objectFit:"cover"}}),x(c.Icon,{zIndex:"10",name:"CloseSolid",size:"30px",color:"gray600",onClick:function(){var t=se,r=t.indexOf(e,0),a=t.splice(0,r);ie(a),console.log(a)}}))})),x(c.Div,(t={pos:"relative",w:"120px",h:"120px",border:"1px solid",borderColor:"gray300",rounded:"md",d:"flex",align:"center",justify:"center"},Object(g.a)(t,"pos","relative"),Object(g.a)(t,"overflow","hidden"),Object(g.a)(t,"m",{t:"-15px"}),t),x(c.Icon,{name:M?"Loading3":"Add",size:"50px",color:"gray600"}),x("input",{type:"file",style:{position:"absolute",top:0,left:0,height:"100%",cursor:"pointer",opacity:"0"},onChange:fe}))))),x(c.Col,{size:{xs:"12",sm:"12",md:"12",lg:"6",xl:"6"}},x(c.Label,{d:"block",m:{b:"1rem"}},"Product Name",x(c.Input,{placeholder:"Product Name",value:f,onChange:function(e){b(e.target.value)}}))),x(c.Col,{size:{xs:"12",sm:"12",md:"12",lg:"6",xl:"6"}},x(c.Label,{d:"block",m:{b:"1rem"}},"Product Category",x("select",{className:"select",onChange:function(e){C(e.target.value)},value:w},x("option",null,"Select state"),P.map((function(e){return x("option",{key:e,value:e._id},e.categoryName)}))))),"fabric"===a?x(c.Col,{size:{xs:"12",sm:"12",md:"12",lg:"6",xl:"6"}},x(c.Label,{d:"block",m:{b:"1rem"}},"Material Price (Per yard)",x(c.Input,{placeholder:"Price",value:te,onChange:function(e){return re(e.target.value)}}))):x(i.a.Fragment,null,x(c.Col,{size:{xs:"12",sm:"12",md:"12",lg:"6",xl:"6"}},x(c.Label,{d:"block",m:{b:"1rem"}},"Material Price (Per yard)",x(c.Input,{placeholder:"Price",value:te,onChange:function(e){return re(e.target.value)}}))),x(c.Col,{size:{xs:"12",sm:"12",md:"12",lg:"6",xl:"6"}},x(c.Label,{d:"block",m:{b:"1rem"}},"Sewing Price",x(c.Input,{placeholder:"Price",value:oe,onChange:function(e){return ne(e.target.value)}})))),x(c.Col,{size:{xs:"12",sm:"12",md:"12",lg:"6",xl:"6"}},x(c.Label,{d:"block",m:{b:"1rem"}},"Discount for product in percent",x(c.Input,{placeholder:"Discount",value:N,onChange:function(e){B(e.target.value)}}))),x(c.Col,{size:"12"},x(c.Label,{d:"block",m:{b:"1rem"}},"Product Description",x(c.Textarea,{placeholder:"Product Description",value:O,onChange:function(e){y(e.target.value)},id:"edit"})))),x(c.Button,{fontFamily:"primary",bg:"warning700",justify:"center",m:{t:"1rem"},prefix:q?x(c.Icon,{name:"Loading3",size:"18px",color:"white",m:{r:"0.5rem"}}):null},q?"Uploading":"Add product")),x(c.Notification,{bg:"warning700",isOpen:Q,onClose:function(){return V(!1)},prefix:x(c.Icon,{name:"CloseSolid",color:"white",size:"18px",m:{r:"0.5rem"}})},Z))}var y=i.a.createElement;function j(){var e=Object(u.c)((function(e){return e.auth})),t=Object(u.c)((function(e){return e.user})),r=Object(u.b)(),a=f.a.getState().auth.token,i=e._id,l=Object(m.useRouter)(),g=Object(s.useState)(!0),v=g[0],x=g[1],j=Object(s.useState)({}),w=j[0],C=j[1],k=Object(s.useState)(""),P=k[0],S=k[1],z=l.query.id;return Object(s.useEffect)((function(){var e=function(){var e=Object(n.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(a)},proxy:{host:"104.236.174.88",port:3128},method:"GET",url:"".concat("https://api.steechit.com/","stores/"),params:{user:i}}).then(function(){var e=Object(n.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 0!==t.data.length?S(t.data[0].type):l.push("/profile/store/start"),e.next=3,p()({headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(a)},proxy:{host:"104.236.174.88",port:3128},method:"GET",url:"".concat("https://api.steechit.com/","products/").concat(z)}).then((function(e){console.log(e),C(e.data)})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)})).finally((function(){x(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r(Object(b.a)(a,i)),e()}),[i,a,r]),y(h.a,{title:"Edit product"},y(c.Div,{p:"20px",style:{borderBottom:"1px solid #ccc"},d:"flex",justify:"space-between",align:"center"},y(c.Text,{tag:"header",textSize:"title"},"Edit product")),v?y(d.a,null):y(c.Div,{p:"20px",pos:"relative"},y(O,{type:P,user:t,product:w})))}},goXs:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/store/products/[id]",function(){return r("RBGv")}])}},[["goXs",0,1,4,2,3,5,6,7,9]]]);