_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[38],{Jh6j:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("o0o1"),n=a.n(r),o=a("HaE+"),c=a("vDqi"),s=a.n(c),i=a("LvDl"),u=a("yuru"),l=function(e,t){return function(){var a=Object(o.a)(n.a.mark((function a(r){var o,c;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,s()({headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(e)},proxy:{host:"104.236.174.88",port:3128},method:"GET",url:"".concat("https://api.steechit.com/","users/").concat(t)});case 3:o=a.sent,r({type:u.b,payload:{success:!0,message:"User data selected",email:o.data.email,phone:o.data.phone,role:o.data.role,verified:o.data.verified,firstName:o.data.firstName,lastName:o.data.lastName,country:o.data.country,state:o.data.state,dateOfBirth:o.data.dateOfBirth,gender:o.data.gender,address:o.data.contact.address,zipCode:o.data.contact.zipCode,imageUrl:o.data.avatar.url}}),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),c=Object(i.get)(a.t0,"response.data.message")||a.t0.message,r({type:u.b,payload:{success:!1,message:c}});case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}},X5RW:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/store/products/create",function(){return a("jWUb")}])},jWUb:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return y}));var r=a("o0o1"),n=a.n(r),o=a("HaE+"),c=a("x242"),s=a("q1tI"),i=a.n(s),u=a("/MKj"),l=a("vDqi"),p=a.n(l),d=a("BsLd"),f=a("2gv+"),m=a("nOHt"),b=a("Jh6j"),h=a("rePB"),g=a("LvDl"),v=i.a.createElement;function x(e){e.user;var t,a=e.type,r=Object(u.c)((function(e){return e.auth})),l=Object(s.useState)(""),d=l[0],f=l[1],b=Object(s.useState)(""),x=b[0],O=b[1],j=Object(s.useState)(""),y=j[0],w=j[1],C=Object(s.useState)([]),k=C[0],S=C[1],P=Object(s.useState)(""),z=(P[0],P[1],Object(s.useState)("")),D=z[0],A=z[1],_=Object(s.useState)(""),E=_[0],N=_[1],I=Object(s.useState)(""),L=(I[0],I[1]),B=Object(s.useState)(""),F=B[0],T=B[1],U=Object(s.useState)(!1),R=U[0],G=U[1],H=Object(s.useState)(!1),J=(H[0],H[1]),W=Object(s.useState)(!1),X=W[0],q=W[1],M=Object(s.useState)(!1),K=M[0],Y=M[1],Q=Object(s.useState)(""),V=Q[0],Z=Q[1],$=Object(s.useState)(""),ee=$[0],te=$[1],ae=Object(s.useState)(""),re=ae[0],ne=ae[1],oe=Object(s.useState)([]),ce=oe[0],se=oe[1],ie=r.token,ue=r._id,le=Object(m.useRouter)();Object(s.useEffect)((function(){fe(),me()}),[]);var pe=function(){var e=Object(o.a)(n.a.mark((function e(t){var r,o,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),G(!0),r={productName:d,productDescription:x,productCategory:y,store:F,type:a,imageCategory:"fabric"===a?"fabric":"design",user:ue,availableOptions:{measurement:null,price:D,percentageDiscount:E},productPictures:ce,feedback:{user:ue},tailor:{sowingPrice:parseFloat(re),materialPrice:"tailor"===a?parseFloat(ee):""},fabric:{materialPrice:"fabric"===a?parseFloat(ee):""},tag:[]},console.log(r),e.prev=4,e.next=7,p()({headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(ie)},proxy:{host:"104.236.174.88",port:3128},method:"POST",url:"".concat("https://api.steechit.com/","products/"),data:r});case 7:o=e.sent,G(!1),J(!0),Z("Product uploaded successfully"),Y(!0),f(""),A(""),se([]),w(""),N(""),O(""),le.push("/store/products"),console.log(o),e.next=28;break;case 22:e.prev=22,e.t0=e.catch(4),c=Object(g.get)(e.t0,"response.data.message")||e.t0.message,console.log(c),Z(c),Y(!0);case 28:case"end":return e.stop()}}),e,null,[[4,22]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(o.a)(n.a.mark((function e(t){var a,r,o,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q(!0),4!==ce.length){e.next=7;break}Z("Your can only add four (4) images for product"),Y(!0),q(!1),e.next=21;break;case 7:return a=t.target.files[0],(r=new FormData).append("image",a,a.name,a.size,a.type),e.next=12,p.a.post("https://steechit-image-manager.herokuapp.com/upload",r);case 12:o=e.sent,L(o.data.link),(c=ce).push({url:o.data.link}),se(c),console.log(ce),Z("Image uploaded successfully"),Y(!0),q(!1);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(o.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(ie)},proxy:{host:"104.236.174.88",port:3128},method:"GET",url:"".concat("https://api.steechit.com/","categories/")});case 2:t=e.sent,S(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(o.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(ie)},proxy:{host:"104.236.174.88",port:3128},method:"GET",url:"".concat("https://api.steechit.com/","stores/"),params:{user:ue}});case 2:t=e.sent,console.log(t.data),T(t.data[0]._id);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return v(i.a.Fragment,null,v("form",{onSubmit:pe},v(c.Row,null,v(c.Col,{size:"12"},v(c.Div,{d:"block",m:{b:"1rem"}},"Product Image(s)",v(c.Div,{d:"flex",style:{flexFlow:"wrap"},align:"center",m:{t:"0.5rem"},justify:"flex-start",pos:"relative"},ce.map((function(e){var t;return v(c.Div,(t={key:e,pos:"relative",w:"120px",h:"120px",border:"1px solid",borderColor:"gray300",rounded:"md",d:"flex",align:"center"},Object(h.a)(t,"pos","relative"),Object(h.a)(t,"overflow","hidden"),Object(h.a)(t,"justify","center"),Object(h.a)(t,"m",{r:"1rem",b:"1rem"}),t),v(c.Image,{pos:"absolute",top:"0",left:"0",w:"100%",h:"100%",src:e.url,style:{objectFit:"cover"}}),v(c.Icon,{zIndex:"10",name:"CloseSolid",size:"30px",color:"gray600",onClick:function(){var t=ce,a=t.indexOf(e,0),r=t.splice(0,a);se(r),console.log(r)}}))})),v(c.Div,(t={pos:"relative",w:"120px",h:"120px",border:"1px solid",borderColor:"gray300",rounded:"md",d:"flex",align:"center",justify:"center"},Object(h.a)(t,"pos","relative"),Object(h.a)(t,"overflow","hidden"),Object(h.a)(t,"m",{t:"-15px"}),t),v(c.Icon,{name:X?"Loading3":"Add",size:"50px",color:"gray600"}),v("input",{type:"file",style:{position:"absolute",top:0,left:0,height:"100%",cursor:"pointer",opacity:"0"},onChange:de}))))),v(c.Col,{size:{xs:"12",sm:"12",md:"12",lg:"6",xl:"6"}},v(c.Label,{d:"block",m:{b:"1rem"}},"Product Name",v(c.Input,{placeholder:"Product Name",value:d,onChange:function(e){f(e.target.value)}}))),v(c.Col,{size:{xs:"12",sm:"12",md:"12",lg:"6",xl:"6"}},v(c.Label,{d:"block",m:{b:"1rem"}},"Product Category",v("select",{className:"select",onChange:function(e){w(e.target.value)},value:y},v("option",null,"Select state"),k.map((function(e){return v("option",{key:e,value:e._id},e.categoryName)}))))),"fabric"===a?v(c.Col,{size:{xs:"12",sm:"12",md:"12",lg:"6",xl:"6"}},v(c.Label,{d:"block",m:{b:"1rem"}},"Material Price (Per yard)",v(c.Input,{placeholder:"Price",value:ee,onChange:function(e){return te(e.target.value)}}))):v(i.a.Fragment,null,v(c.Col,{size:{xs:"12",sm:"12",md:"12",lg:"6",xl:"6"}},v(c.Label,{d:"block",m:{b:"1rem"}},"Material Price (Per yard)",v(c.Input,{placeholder:"Price",value:ee,onChange:function(e){return te(e.target.value)}}))),v(c.Col,{size:{xs:"12",sm:"12",md:"12",lg:"6",xl:"6"}},v(c.Label,{d:"block",m:{b:"1rem"}},"Sewing Price",v(c.Input,{placeholder:"Price",value:re,onChange:function(e){return ne(e.target.value)}})))),v(c.Col,{size:{xs:"12",sm:"12",md:"12",lg:"6",xl:"6"}},v(c.Label,{d:"block",m:{b:"1rem"}},"Discount for product in percent",v(c.Input,{placeholder:"Discount",value:E,onChange:function(e){N(e.target.value)}}))),v(c.Col,{size:"12"},v(c.Label,{d:"block",m:{b:"1rem"}},"Product Description",v(c.Textarea,{placeholder:"Product Description",value:x,onChange:function(e){O(e.target.value)}})))),v(c.Button,{fontFamily:"primary",bg:"warning700",justify:"center",m:{t:"1rem"},prefix:R?v(c.Icon,{name:"Loading3",size:"18px",color:"white",m:{r:"0.5rem"}}):null},R?"Uploading":"Add product")),v(c.Notification,{bg:"warning700",isOpen:K,onClose:function(){return Y(!1)},prefix:v(c.Icon,{name:"CloseSolid",color:"white",size:"18px",m:{r:"0.5rem"}})},V))}var O=a("7HOD"),j=i.a.createElement;function y(){var e=Object(u.c)((function(e){return e.auth})),t=Object(u.c)((function(e){return e.user})),a=Object(u.b)(),r=f.a.getState().auth.token,i=e._id,l=Object(m.useRouter)(),h=Object(s.useState)(!0),g=h[0],v=h[1],y=Object(s.useState)(""),w=y[0],C=y[1];return Object(s.useEffect)((function(){var e=function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(r)},proxy:{host:"104.236.174.88",port:3128},method:"GET",url:"".concat("https://api.steechit.com/","stores/"),params:{user:i}}).then(function(){var e=Object(o.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0!==t.data.length?C(t.data[0].type):l.push("/profile/store/start");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)})).finally((function(){v(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a(Object(b.a)(r,i)),e()}),[i,r,a]),j(O.a,{title:"Sell a product | Steechit"},j(c.Div,{p:"20px",style:{borderBottom:"1px solid #ccc"},d:"flex",justify:"space-between",align:"center"},j(c.Text,{tag:"header",textSize:"title"},"Upload a product")),g?j(d.a,null):j(c.Div,{p:"20px",pos:"relative"},j(x,{type:w,user:t})))}}},[["X5RW",0,1,4,2,3,5,6,7,9]]]);